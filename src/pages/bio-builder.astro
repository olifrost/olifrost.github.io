---
import Layout from '../layouts/Layout.astro';
import { SITE_TITLE } from '../consts';
---

<Layout title={`Bio Builder - ${SITE_TITLE}`} description="Generate a custom bio for Oli Frost">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6">Bio Builder</h1>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- Photo section -->
            <div class="lg:col-span-1">
                <div class="sticky top-8">
                    <img 
                        src="/img/olifrost.jpg" 
                        alt="Oli Frost" 
                        class="w-full rounded-lg shadow-md mb-4"
                    />
                    <a 
                        href="/img/olifrost.jpg" 
                        download="oli-frost-headshot.jpg"
                        class="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition-colors"
                    >
                        Download Photo
                    </a>
                    <p class="text-sm text-gray-600 mt-2 text-center">
                        High-res version coming soon
                    </p>
                </div>
            </div>

            <!-- Bio builder section -->
            <div class="lg:col-span-2">
                <div class="bg-gray-50 p-6 rounded-lg mb-6">
                    <h2 class="text-xl font-semibold mb-4">Build Your Bio</h2>
                    <p class="text-gray-600 mb-4">
                        Click the highlighted sections to customize the bio for your needs.
                    </p>
                    
                    <div id="bio-output" class="prose prose-lg max-w-none leading-relaxed">
                        <p>
                            <span class="bio-variable font-medium text-blue-600 hover:bg-blue-100 cursor-pointer px-1 rounded" data-type="intro">
                                Oli Frost makes songs, films and websites about the climate crisis
                            </span>. 
                            <span class="bio-variable font-medium text-blue-600 hover:bg-blue-100 cursor-pointer px-1 rounded" data-type="achievement">
                                He created a fossil fuel funfair, made a video game about asset management, and got Greta Thunberg dancing the macarena
                            </span>.
                        </p>
                        
                        <p>
                            His work has been featured 
                            <span class="bio-variable font-medium text-blue-600 hover:bg-blue-100 cursor-pointer px-1 rounded" data-type="coverage">
                                everywhere from UK Parliament to Britain's Got Talent, BBC to Fox News
                            </span>.
                        </p>
                        
                        <p>
                            <span class="bio-variable font-medium text-blue-600 hover:bg-blue-100 cursor-pointer px-1 rounded" data-type="collaboration">
                                He works with Greenpeace and co-founded climate campaign group Serious People
                            </span>. 
                            <span class="bio-variable font-medium text-blue-600 hover:bg-blue-100 cursor-pointer px-1 rounded" data-type="stats">
                                His content has 330k followers and over 75 million views
                            </span>.
                        </p>
                    </div>
                    
                    <div class="mt-6 flex gap-4">
                        <button 
                            id="copy-bio" 
                            class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded transition-colors"
                        >
                            Copy Bio
                        </button>
                        <button 
                            id="reset-bio" 
                            class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition-colors"
                        >
                            Reset
                        </button>
                    </div>
                </div>

                <!-- Options panels (hidden by default) -->
                <div id="options-panel" class="hidden bg-white border border-gray-200 rounded-lg p-4 shadow-lg">
                    <h3 id="options-title" class="font-semibold mb-3"></h3>
                    <div id="options-content" class="space-y-2"></div>
                </div>
            </div>
        </div>

        <div class="text-center text-gray-600">
            <p>Need something specific? <a href="mailto:mail@olifro.st" class="text-blue-600 hover:text-blue-400">Email me</a> and I'll write you a custom bio.</p>
        </div>
    </div>
</Layout>

<script>
    const bioOptions = {
        intro: [
            "Oli Frost makes songs, films and websites about the climate crisis",
            "Oli Frost is a climate satirist and content creator",
            "Oli Frost creates viral content about climate change", 
            "Oli Frost is a musician, filmmaker and digital artist focused on climate issues",
            "Oli Frost makes novelty songs, films and websites about the climate crisis"
        ],
        achievement: [
            "He created a fossil fuel funfair, made a video game about asset management, and got Greta Thunberg dancing the macarena",
            "He got Greta Thunberg dancing the macarena to one of his songs",
            "His songs have been streamed millions of times and he's played at major festivals",
            "He took a shellphone to the UN Ocean Conference and created a wellness app for oil executives",
            "He launched a fake advertising agency and opened a fossil fuel funfair to annoy WPP",
            "He made over 20 novelty songs about climate change that have gone viral",
            "He played recorder on Britain's Got Talent and created viral climate strike posters"
        ],
        coverage: [
            "everywhere from UK Parliament to Britain's Got Talent, BBC to Fox News",
            "on Sky News, TRT World, and in the Financial Times",
            "from Parliament to music festivals, art shows to bins",
            "by the BBC, Vice, Fox News, and the Financial Times",
            "across major news outlets and has been exhibited in galleries"
        ],
        collaboration: [
            "He works with Greenpeace and co-founded climate campaign group Serious People",
            "He makes weekly videos for Greenpeace and co-founded Serious People",
            "He co-founded climate campaign studio Serious People in 2024",
            "He collaborates with major environmental organizations",
            "He handles most production himself but also works with climate organizations"
        ],
        stats: [
            "His content has 330k followers and over 75 million views",
            "His work has gained 330k followers and been viewed over 75 million times",
            "He has over 75 million views across platforms",
            "His videos have millions of views and his songs are on Spotify editorial playlists",
            "Only 1 person has recognized him in Franco Manca (but he was wearing a hat)"
        ]
    };

    let currentVariable = null;
    let originalTexts = {};

    // Store original texts
    document.querySelectorAll('.bio-variable').forEach(el => {
        originalTexts[el.dataset.type] = el.textContent;
    });

    // Add click handlers to bio variables
    document.querySelectorAll('.bio-variable').forEach(variable => {
        variable.addEventListener('click', (e) => {
            const type = e.target.dataset.type;
            showOptions(type, e.target);
        });
    });

    function showOptions(type, element) {
        currentVariable = element;
        const panel = document.getElementById('options-panel');
        const title = document.getElementById('options-title');
        const content = document.getElementById('options-content');
        
        title.textContent = `Choose ${type}:`;
        content.innerHTML = '';
        
        bioOptions[type].forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'block w-full text-left p-2 hover:bg-gray-100 rounded transition-colors';
            button.addEventListener('click', () => {
                currentVariable.textContent = option;
                panel.classList.add('hidden');
            });
            content.appendChild(button);
        });
        
        panel.classList.remove('hidden');
        
        // Position panel near the clicked element
        const rect = element.getBoundingClientRect();
        panel.style.position = 'fixed';
        panel.style.top = `${rect.bottom + 10}px`;
        panel.style.left = `${rect.left}px`;
        panel.style.zIndex = '50';
    }

    // Copy bio functionality
    document.getElementById('copy-bio').addEventListener('click', () => {
        const bioText = document.getElementById('bio-output').textContent.trim();
        navigator.clipboard.writeText(bioText).then(() => {
            const button = document.getElementById('copy-bio');
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.classList.remove('bg-green-600', 'hover:bg-green-700');
            button.classList.add('bg-green-800');
            
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-800');
                button.classList.add('bg-green-600', 'hover:bg-green-700');
            }, 2000);
        });
    });

    // Reset bio functionality
    document.getElementById('reset-bio').addEventListener('click', () => {
        document.querySelectorAll('.bio-variable').forEach(el => {
            el.textContent = originalTexts[el.dataset.type];
        });
        document.getElementById('options-panel').classList.add('hidden');
    });

    // Hide options panel when clicking outside
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.bio-variable') && !e.target.closest('#options-panel')) {
            document.getElementById('options-panel').classList.add('hidden');
        }
    });
</script>

<style>
    .bio-variable {
        transition: all 0.2s ease;
    }
    
    .bio-variable:hover {
        transform: translateY(-1px);
    }
    
    #options-panel {
        max-width: 400px;
    }
</style>
